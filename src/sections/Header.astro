---
import HeaderClip from '@/components/HeaderClip.astro'
import RoundedCorners from '@/assets/roundedCorners.svg'
import Button from '@/components/Button'
import Brand from '@/components/Brand.astro'
import { cn } from '@/lib/utils'
import { translations } from '@/i18n/translations'
import LanguageSwitcher from '@/components/LanguageSwitcher.astro'
import { type Lang } from '@/types'
import { getRelativeLocaleUrl } from 'astro:i18n'

const { pathname } = Astro.url

const currentLang = (Astro.currentLocale || 'es') as Lang
const isActive = (path: string) => pathname === path
const { talk } = translations[currentLang]
---

<header id="header">
  <div class="z-100 fixed top-0 w-full">
    <HeaderClip position="left" />

    <div class="border-b-grey bg-lightgrey 1.5xs:px-5 mx-6 border-b 2xl:px-10">
      <div
        class="header-inner 2md:grid-cols-[1fr_2fr_1fr] relative grid h-20 grid-cols-2 items-center"
      >
        <Brand className="xs:scale-100 scale-85 max-w-max origin-left" />

        <div
          class="header-secondary 2md:border-x-[1.5px] border-x-grey 2md:flex hidden h-full items-center px-4"
        >
        </div>

        <div class="flex items-center justify-between pl-4">
          <LanguageSwitcher locale={currentLang} pathname={pathname} />

          <div class="flex justify-end">
            <Button
              href={getRelativeLocaleUrl(currentLang, '/contact')}
              className={cn(isActive('/contact') && 'pointer-events-none')}
            >
              {talk}
            </Button>
          </div>
        </div>
      </div>
    </div>

    <HeaderClip position="right" />
  </div>

  <RoundedCorners />
</header>
